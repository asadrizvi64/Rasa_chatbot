version: '3.1'
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
intents:
  - greet
  - request_insurance_quote
  - provide_name
  - inform
  - interrupt

entities:
  - insurance_type
  - car_make
  - car_model
  - name

responses:
  utter_greet:
    - text: "Hello! How can I assist you today?"

  utter_ask_name:
    - text: "Please provide your name."

  utter_ask_car_type:
    - text: "What type of insurance are you interested in? (e.g., car, home)"

  utter_ask_car_make:
    - text: "What is the make of your car?"

  utter_ask_car_model:
    - text: "What is the model of your car?"

  utter_insurance_quote:
    - text: "Your car insurance quote is $500 per year."

  utter_fallback:
    - text: "I'm sorry, I didn't understand that. Please ask again."

forms:
  insurance_quote_form:
    required_slots:
        - insurance_type
        - car_make
        - car_model

slots:
  name:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: name


  insurance_type:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: insurance_type
  car_make:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: car_make
  car_model:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: car_model

actions:
  - insurance_quote_form
  - validate_insurance_quote_form
  - action_calculate_insurance_quote
  - action_interrupt
  - utter_ask_name
  - utter_ask_car_type
  - utter_ask_car_make
  - utter_ask_car_model
  - utter_insurance_quote
  - utter_fallback
#slots:
#  pizza_size:
#    type: text
#    influence_conversation: true
#    mappings:
#    - type: from_entity
#      entity: pizza_size
#      conditions:
#      - active_loop: pizza_form
#        requested_slot: pizza_size
#  pizza_type:
#    type: text
#    influence_conversation: true
#    mappings:
#    - type: from_entity
#      entity: pizza_type
#  vegetarian:
#    type: bool
#    influence_conversation: true
#    mappings:
#    - type: from_intent
#      value: true
#      intent: affirm
#    - type: from_intent
#      value: false
#      intent: deny
